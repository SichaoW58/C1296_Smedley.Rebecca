logit_location_self %>% tab_model()
Dat_Melanoma_clean %>% mutate(Ki67=factor(Ki67,levels=c(0,1)))
logit_location_self <- glm(Ki67 ~ location_self, data = Dat_Melanoma_clean %>% mutate(Ki67=factor(Ki67,levels=c(0,1))) %>% filter(location_self!=3), family = "binomial")
logit_location_self %>% tab_model()
#| label: infer-loc-report
# Will use univariate logit to get odd ratio and ci, be careful has to set reference level for Ki67 to 0
logit_location_report <- glm(Ki67 ~ location_report, data = Dat_Melanoma_clean %>% mutate(Ki67=factor(Ki67,levels=c(0,1))), family = "binomial")
logit_location_report %>% tab_model()
#| label: load-packages
#| include: false
pacman::p_load(## file folder setup
fs,   # creat folder dir_create()
here, # easy to do cross reference in the project.
## Data step
readr,
readxl, # read_excel()
tidyverse,
janitor,
## IDA
Hmisc,
## Model
meta,
metafor,
# dmetar, #for find.outliers()
lme4,
glmmTMB,
broom,
emmeans,
rpart, # for dx2y()
psych,
## result reporting
### graph
ggplot2,
### table
gt,
gtsummary,
knitr,        # for kable()
sjPlot      # tab_model()
)
set.seed(42004063)
Dat_Melanoma_clean
#|:label: cor-tetra
tetrachoric(Dat_Melanoma_clean %>% select(Ki67,sex))
Dat_Melanoma_clean %>% select(Ki67,sex)
data(bock)
tetrachoric(lsat6)
lsat6
Ki67
Dat_Melanoma_clean
#|:label: cor-tetra
tetrachoric(Dat_Melanoma_clean %>% select(Ki67,sex) %>% mutate_all(as.numeric()))
Dat_Melanoma_clean %>% select(Ki67,sex) %>% mutate_all(as.numeric())
#|:label: cor-tetra
tetrachoric(Dat_Melanoma_clean %>% select(Ki67,sex) %>% mutate_all(as.numeric))
#|:label: cor-tetra
tetrachoric(Dat_Melanoma_clean %>% select(-case_number) %>% mutate_all(as.numeric))
Dat_Melanoma_clean
#|:label: cor-tetra
tetrachoric(Dat_Melanoma_clean %>% select(-case_number,-location_self,location_report,-tumor_thickness,-mitotic_count) %>% mutate_all(as.numeric))
Dat_Melanoma_clean %>% select(-case_number,-location_self,location_report,-tumor_thickness,-mitotic_count)
#|:label: cor-tetra
tetrachoric(Dat_Melanoma_clean %>% select(-case_number,-location_self,-location_report,-tumor_thickness,-mitotic_count) %>% mutate_all(as.numeric))
Dat_Melanoma_clean %>% select(-case_number,-location_self,-location_report,-tumor_thickness,-mitotic_count) %>% mutate_all(as.numeric)
#|:label: cor-tetra
tetrachoric(Dat_Melanoma_clean %>% select(-case_number,-location_self,-location_report,-tumor_thickness,-mitotic_count))
Dat_Melanoma_clean %>% select(-case_number,-location_self,-location_report,-tumor_thickness,-mitotic_count)
#|:label: cor-tetra
tetrachoric(Dat_Melanoma_clean %>% select(-case_number,-location_self,-location_report,-tumor_thickness,-mitotic_count) %>% mutate_all(as.character))
Dat_Melanoma_clean %>% select(-case_number,-location_self,-location_report,-tumor_thickness,-mitotic_count) %>% mutate_all(as.character)
#|:label: cor-tetra
tetrachoric(Dat_Melanoma_clean %>% select(-case_number,-location_self,-location_report,-tumor_thickness,-mitotic_count) %>% mutate_all(as.character) %>% mutate_all(as.numeric))
Dat_Melanoma_clean %>% select(-case_number,-location_self,-location_report,-tumor_thickness,-mitotic_count) %>% mutate_all(as.character) %>% mutate_all(as.numeric)
Dat_Melanoma_clean %>% select(-case_number,-location_self,-location_report,-tumor_thickness,-mitotic_count)
#|:label: cor-tetra
tetrachoric(Dat_Melanoma_clean %>% select(-case_number,-location_self,-location_report,-tumor_thickness,-mitotic_count) %>% mutate(sex=ifelse(sex=="F",1,0),intact=ifelse(intact=="I",1,0)) %>%  mutate_all(as.character) %>% mutate_all(as.numeric))
#|:label: cor-tetra
tetrachoric<-etrachoric(Dat_Melanoma_clean %>% select(-case_number,-location_self,-location_report,-tumor_thickness,-mitotic_count) %>% mutate(sex=ifelse(sex=="F",1,0),intact=ifelse(intact=="I",1,0)) %>%  mutate_all(as.character) %>% mutate_all(as.numeric))
#|:label: cor-tetra
tetrachoric<-tetrachoric(Dat_Melanoma_clean %>% select(-case_number,-location_self,-location_report,-tumor_thickness,-mitotic_count) %>% mutate(sex=ifelse(sex=="F",1,0),intact=ifelse(intact=="I",1,0)) %>%  mutate_all(as.character) %>% mutate_all(as.numeric))
tetrachoric
tetrachoric$rho
tetrachoric$rho %>% as.tibble()
tetrachoric$rho %>% as.matrix
tetrachoric$rho %>% round(2) %>% as.matrix
#| label: cor-tetra
#| warning: false
tetrachoric<-tetrachoric(Dat_Melanoma_clean %>% select(-case_number,-location_self,-location_report,-tumor_thickness,-mitotic_count) %>% mutate(sex=ifelse(sex=="F",1,0),intact=ifelse(intact=="I",1,0)) %>%  mutate_all(as.character) %>% mutate_all(as.numeric))
tetrachoric$rho %>% round(2) %>% as.matrix
Dat_Melanoma_clean %>% select(Ki67,location_self,location_report)
#| label: cor-tetra
#| warning: false
polychoric<-polychoric(Dat_Melanoma_clean %>% select(Ki67,location_self,location_report) %>% mutate_all(as.character) %>% mutate_all(as.numeric))
polychoric
polychoric$rho %>% round(2) %>% as.matrix
#| label: cor-biserial
#| warning: false
biserial(Dat_Melanoma_clean$Ki67,Dat_Melanoma_clean )
#| label: cor-biserial
#| warning: false
biserial(Dat_Melanoma_clean$Ki67,Dat_Melanoma_clean$tumor_thickness )
#| label: cor-biserial
#| warning: false
biserial(Dat_Melanoma_clean$Ki67 %>% as.numeric,Dat_Melanoma_clean$tumor_thickness)
biserial)
?biserial()
#| label: cor-biserial
#| warning: false
biserial(Dat_Melanoma_clean$tumor_thickness,Dat_Melanoma_clean$Ki67 %>% as.numeric)
Dat_Melanoma_clean$Ki67 %>% as.numeric
#| label: cor-biserial
#| warning: false
biserial(Dat_Melanoma_clean$tumor_thickness,Dat_Melanoma_clean$Ki67)
biserial(Dat_Melanoma_clean$tumor_thickness,Dat_Melanoma_clean$Ki67)
#| label: cor-biserial
#| warning: false
biserial(Dat_Melanoma_clean,Dat_Melanoma_clean$Ki67)
#| label: cor-biserial
#| warning: false
biserial(Dat_Melanoma_clean$tumor_thickness,Dat_Melanoma_clean$Ki67)
biserial(Dat_Melanoma_clean$mitotic_count,Dat_Melanoma_clean$Ki67)
#| label: load-packages
#| include: false
pacman::p_load(## file folder setup
fs,   # creat folder dir_create()
here, # easy to do cross reference in the project.
## Data step
readr,
readxl, # read_excel()
tidyverse,
janitor,
## IDA
Hmisc,
## Model
meta,
metafor,
# dmetar, #for find.outliers()
lme4,
glmmTMB,
broom,
emmeans,
rpart, # for dx2y()
psych, #
confintr, #for cramersv(), also good bootstrap CI tools.
## result reporting
### graph
ggplot2,
### table
gt,
gtsummary,
knitr,        # for kable()
sjPlot      # tab_model()
)
set.seed(42004063)
cramersv(Dat_Melanoma_clean)
Dat_Melanoma_clean
cramersv(Dat_Melanoma_clean %>% select(Ki67,location_self))
Dat_Melanoma_clean %>% select(Ki67,location_self)
?cramersv()
cramersv(Dat_Melanoma_clean[c(Ki67,location_self)])
cramersv(Dat_Melanoma_clean[c("Ki67","location_self")])
cramersv(Dat_Melanoma_clean[c("Ki67","location_self")] %>% drop_na())
Dat_Melanoma_clean[c("Ki67","location_self")] %>% drop_na()
cramersv(Dat_Melanoma_clean %>% select(Ki67,location_self,location_report) %>% mutate_all(as.character) %>% mutate_all(as.numeric))
cramersv(Dat_Melanoma_clean %>% select(Ki67,location_self) %>% mutate_all(as.character) %>% mutate_all(as.numeric))
Dat_Melanoma_clean %>% select(Ki67,location_self) %>% mutate_all(as.character) %>% mutate_all(as.numeric)
cramersv(Dat_Melanoma_clean %>% select(Ki67,location_self) %>% mutate_all(as.character) %>% mutate_all(as.numeric) %>% drop_na())
cramersv(Dat_Melanoma_clean %>% select(Ki67,location_report) %>% mutate_all(as.character) %>% mutate_all(as.numeric) %>% drop_na())
cramersv(mtcars[c("am", "vs")])
mtcars[c("am", "vs")]
cramersv(Dat_Melanoma_clean %>% select(Ki67,location_report) %>% as.matrix())
Dat_Melanoma_clean %>% select(Ki67,location_report) %>% as.matrix()
cramersv(Dat_Melanoma_clean %>% select(Ki67,location_report) %>% mutate_all(as.numeric) %>% as.matrix())
cramersv(Dat_Melanoma_clean %>% select(Ki67,location_self) %>% mutate_all(as.numeric) %>% as.matrix())
Dat_Melanoma_clean %>% select(Ki67,location_self) %>% mutate_all(as.numeric) %>% as.matrix()
cramersv(Dat_Melanoma_clean %>% select(Ki67,location_self) %>% drop_na() %>% mutate_all(as.numeric) %>% as.matrix())
cramersv(Dat_Melanoma_clean %>% select(Ki67,location_report)%>% drop_na() %>% mutate_all(as.numeric) %>% as.matrix())
Dat_Melanoma_clean
cramersv(Dat_Melanoma_clean %>% select(Ki67,nuclear_atypia)%>% drop_na() %>% mutate_all(as.numeric) %>% as.matrix())
Dat_Melanoma_clean
cramersv(Dat_Melanoma_clean %>% select(Ki67,size)%>% drop_na() %>% mutate_all(as.numeric) %>% as.matrix())
cramersv(Dat_Melanoma_clean %>% select(Ki67,beyond_dermis)%>% drop_na() %>% mutate_all(as.numeric) %>% as.matrix())
cramersv(Dat_Melanoma_clean %>% select(Ki67,ulceration)%>% drop_na() %>% mutate_all(as.numeric) %>% as.matrix())
cramersv(Dat_Melanoma_clean %>% select(Ki67,pigment)%>% drop_na() %>% mutate_all(as.numeric) %>% as.matrix())
cramersv(Dat_Melanoma_clean %>% select(Ki67,mitotoc)%>% drop_na() %>% mutate_all(as.numeric) %>% as.matrix())
cramersv(Dat_Melanoma_clean %>% select(Ki67,nuclear_atypia)%>% drop_na() %>% mutate_all(as.numeric) %>% as.matrix())
cramersv(Dat_Melanoma_clean %>% select(Ki67,intact)%>% drop_na() %>% mutate_all(as.numeric) %>% as.matrix())
cramersv(Dat_Melanoma_clean %>% select(Ki67,sex)%>% drop_na() %>% mutate_all(as.numeric) %>% as.matrix())
#| label: cor-cramer
cramersv(Dat_Melanoma_clean %>% select(Ki67,location_self) %>% drop_na() %>% mutate_all(as.numeric) %>% as.matrix())
cramersv(Dat_Melanoma_clean %>% select(Ki67,location_report)%>% drop_na() %>% mutate_all(as.numeric) %>% as.matrix())
cramersv(Dat_Melanoma_clean %>% select(Ki67,sex)%>% drop_na() %>% mutate_all(as.numeric) %>% as.matrix())
cramersv(Dat_Melanoma_clean %>% select(Ki67,intact)%>% drop_na() %>% mutate_all(as.numeric) %>% as.matrix())
cramersv(Dat_Melanoma_clean %>% select(Ki67,nuclear_atypia)%>% drop_na() %>% mutate_all(as.numeric) %>% as.matrix())
cramersv(Dat_Melanoma_clean %>% select(Ki67,mitotoc)%>% drop_na() %>% mutate_all(as.numeric) %>% as.matrix())
cramersv(Dat_Melanoma_clean %>% select(Ki67,pigment)%>% drop_na() %>% mutate_all(as.numeric) %>% as.matrix())
cramersv(Dat_Melanoma_clean %>% select(Ki67,ulceration)%>% drop_na() %>% mutate_all(as.numeric) %>% as.matrix())
cramersv(Dat_Melanoma_clean %>% select(Ki67,beyond_dermis)%>% drop_na() %>% mutate_all(as.numeric) %>% as.matrix())
cramersv(Dat_Melanoma_clean %>% select(Ki67,size)%>% drop_na() %>% mutate_all(as.numeric) %>% as.matrix())
c(cramersv(Dat_Melanoma_clean %>% select(Ki67,location_self) %>% drop_na() %>% mutate_all(as.numeric) %>% as.matrix()),
cramersv(Dat_Melanoma_clean %>% select(Ki67,location_report)%>% drop_na() %>% mutate_all(as.numeric) %>% as.matrix()),
cramersv(Dat_Melanoma_clean %>% select(Ki67,sex)%>% drop_na() %>% mutate_all(as.numeric) %>% as.matrix()),
cramersv(Dat_Melanoma_clean %>% select(Ki67,intact)%>% drop_na() %>% mutate_all(as.numeric) %>% as.matrix()),
cramersv(Dat_Melanoma_clean %>% select(Ki67,nuclear_atypia)%>% drop_na() %>% mutate_all(as.numeric) %>% as.matrix()),
cramersv(Dat_Melanoma_clean %>% select(Ki67,mitotoc)%>% drop_na() %>% mutate_all(as.numeric) %>% as.matrix()),
cramersv(Dat_Melanoma_clean %>% select(Ki67,pigment)%>% drop_na() %>% mutate_all(as.numeric) %>% as.matrix()),
cramersv(Dat_Melanoma_clean %>% select(Ki67,ulceration)%>% drop_na() %>% mutate_all(as.numeric) %>% as.matrix()),
cramersv(Dat_Melanoma_clean %>% select(Ki67,beyond_dermis)%>% drop_na() %>% mutate_all(as.numeric) %>% as.matrix()),
cramersv(Dat_Melanoma_clean %>% select(Ki67,size)%>% drop_na() %>% mutate_all(as.numeric) %>% as.matrix()))
names(Dat_Melanoma_clean)
names(Dat_Melanoma_clean)[3-12]
cramer-c(cramersv(Dat_Melanoma_clean %>% select(Ki67,location_self) %>% drop_na() %>% mutate_all(as.numeric) %>% as.matrix()),
cramersv(Dat_Melanoma_clean %>% select(Ki67,location_report)%>% drop_na() %>% mutate_all(as.numeric) %>% as.matrix()),
cramersv(Dat_Melanoma_clean %>% select(Ki67,sex)%>% drop_na() %>% mutate_all(as.numeric) %>% as.matrix()),
cramersv(Dat_Melanoma_clean %>% select(Ki67,intact)%>% drop_na() %>% mutate_all(as.numeric) %>% as.matrix()),
cramersv(Dat_Melanoma_clean %>% select(Ki67,nuclear_atypia)%>% drop_na() %>% mutate_all(as.numeric) %>% as.matrix()),
cramersv(Dat_Melanoma_clean %>% select(Ki67,mitotoc)%>% drop_na() %>% mutate_all(as.numeric) %>% as.matrix()),
cramersv(Dat_Melanoma_clean %>% select(Ki67,pigment)%>% drop_na() %>% mutate_all(as.numeric) %>% as.matrix()),
cramersv(Dat_Melanoma_clean %>% select(Ki67,ulceration)%>% drop_na() %>% mutate_all(as.numeric) %>% as.matrix()),
cramersv(Dat_Melanoma_clean %>% select(Ki67,beyond_dermis)%>% drop_na() %>% mutate_all(as.numeric) %>% as.matrix()),
cramersv(Dat_Melanoma_clean %>% select(Ki67,size)%>% drop_na() %>% mutate_all(as.numeric) %>% as.matrix()))
cramer<-c(cramersv(Dat_Melanoma_clean %>% select(Ki67,location_self) %>% drop_na() %>% mutate_all(as.numeric) %>% as.matrix()),
cramersv(Dat_Melanoma_clean %>% select(Ki67,location_report)%>% drop_na() %>% mutate_all(as.numeric) %>% as.matrix()),
cramersv(Dat_Melanoma_clean %>% select(Ki67,sex)%>% drop_na() %>% mutate_all(as.numeric) %>% as.matrix()),
cramersv(Dat_Melanoma_clean %>% select(Ki67,intact)%>% drop_na() %>% mutate_all(as.numeric) %>% as.matrix()),
cramersv(Dat_Melanoma_clean %>% select(Ki67,nuclear_atypia)%>% drop_na() %>% mutate_all(as.numeric) %>% as.matrix()),
cramersv(Dat_Melanoma_clean %>% select(Ki67,mitotoc)%>% drop_na() %>% mutate_all(as.numeric) %>% as.matrix()),
cramersv(Dat_Melanoma_clean %>% select(Ki67,pigment)%>% drop_na() %>% mutate_all(as.numeric) %>% as.matrix()),
cramersv(Dat_Melanoma_clean %>% select(Ki67,ulceration)%>% drop_na() %>% mutate_all(as.numeric) %>% as.matrix()),
cramersv(Dat_Melanoma_clean %>% select(Ki67,beyond_dermis)%>% drop_na() %>% mutate_all(as.numeric) %>% as.matrix()),
cramersv(Dat_Melanoma_clean %>% select(Ki67,size)%>% drop_na() %>% mutate_all(as.numeric) %>% as.matrix()))
data.frame(marker=names(Dat_Melanoma_clean)[3-12],cramerV=cramer)
cramer
names(Dat_Melanoma_clean)[3-12]
data.frame(marker=names(Dat_Melanoma_clean)[3],cramerV=cramer)
data.frame(marker=names(Dat_Melanoma_clean)[3:12],cramerV=cramer)
data.frame(marker=names(Dat_Melanoma_clean)[3:12],cramerV=cramer %>% round(3))
ci_cramersv(
Dat_Melanoma_clean %>% select(Ki67,size)%>% drop_na(),
probs = c(0.025, 0.975),
type = c( "bootstrap"),
boot_type = c("bca"),
R = 500L,
)
ci_cramersv(
Dat_Melanoma_clean %>% select(Ki67,size)%>% drop_na() %>% mutate_all(as.numeric) %>% as.matrix()),
ci_cramersv(
Dat_Melanoma_clean %>% select(Ki67,size)%>% drop_na() %>% mutate_all(as.numeric) %>% as.matrix(),
probs = c(0.025, 0.975),
type = c( "bootstrap"),
boot_type = c("bca"),
R = 500L,
)
Dat_Melanoma_clean %>% select(Ki67,size)%>% drop_na() %>% mutate_all(as.numeric) %>% as.matrix()
ci_cramersv(
Dat_Melanoma_clean %>% select(Ki67,size)%>% drop_na() %>% mutate_all(as.numeric) ,
probs = c(0.025, 0.975),
type = c( "bootstrap"),
boot_type = c("bca"),
R = 500L,
)
Dat_Melanoma_clean %>% select(Ki67,size)%>% drop_na() %>% mutate_all(as.numeric)
ci_cramersv(
Dat_Melanoma_clean %>% select(Ki67,size)%>% drop_na() %>% mutate_all(as.numeric) %>% as.data.frame() ,
probs = c(0.025, 0.975),
type = c( "bootstrap"),
boot_type = c("bca"),
R = 500L,
)
ci_cramer_size<-ci_cramersv(
Dat_Melanoma_clean %>% select(Ki67,size)%>% drop_na() %>% mutate_all(as.numeric) %>% as.data.frame() ,
probs = c(0.025, 0.975),
type = c( "bootstrap"),
boot_type = c("bca"),
R = 500L,
)
ci_cramer_size
ci_cramer_size
ci_cramer_size$interval
ci_cramer_size<-ci_cramersv(
Dat_Melanoma_clean %>% select(Ki67,size)%>% drop_na() %>% mutate_all(as.numeric) %>% as.data.frame() ,
probs = c(0.025, 0.975),
type = c( "bootstrap"),
boot_type = c("bca"),
R = 500L,
)
ci_cramer_size
data.frame(marker=names(Dat_Melanoma_clean)[3:12],cramerV=cramer %>% round(3))
ci_cramer_beyond_dermis<-ci_cramersv(
Dat_Melanoma_clean %>% select(Ki67,beyond_dermis)%>% drop_na() %>% mutate_all(as.numeric) %>% as.data.frame() ,
probs = c(0.025, 0.975),
type = c( "bootstrap"),
boot_type = c("bca"),
R = 500L,
)
ci_cramer_beyond_dermis
data.frame(marker=names(Dat_Melanoma_clean)[3:12],cramerV=cramer %>% round(3))
ci_cramer_size$estimate
ci_cramer_size<-ci_cramersv(
Dat_Melanoma_clean %>% select(Ki67,size)%>% drop_na() %>% mutate_all(as.numeric) %>% as.data.frame() ,
probs = c(0.025, 0.975),
type = c( "chi-squared"),
boot_type = c("bca"),
R = 500L,
)
ci_cramer_size
ci_cramer_size$interval %>% pluck(1)
ci_cramer_pigment<-ci_cramersv(
Dat_Melanoma_clean %>% select(Ki67,pigment)%>% drop_na() %>% mutate_all(as.numeric) %>% as.data.frame() ,
probs = c(0.025, 0.975),
type = c( "bootstrap"),
boot_type = c("bca"),
R = 500L,
)
ci_cramer_intact<-ci_cramersv(
Dat_Melanoma_clean %>% select(Ki67,intact)%>% drop_na() %>% mutate_all(as.numeric)  ,
probs = c(0.025, 0.975),
type = c( "bootstrap"),
boot_type = c("bca"),
R = 500L,
)
ci_cramer_sex<-ci_cramersv(
Dat_Melanoma_clean %>% select(Ki67,sex)%>% drop_na() %>% mutate_all(as.numeric) %>% as.data.frame() ,
probs = c(0.025, 0.975),
type = c( "bootstrap"),
boot_type = c("bca"),
R = 500L,
)
ci_cramer_location_self<-ci_cramersv(
Dat_Melanoma_clean %>% select(Ki67,location_self)%>% drop_na() %>% mutate_all(as.numeric) %>% as.data.frame() ,
probs = c(0.025, 0.975),
type = c( "bootstrap"),
boot_type = c("bca"),
R = 500L,
)
cramersv(Dat_Melanoma_clean %>% select(Ki67,location_self) %>% drop_na() %>% mutate_all(as.numeric) %>% as.data.frame())
ci_cramersv(
Dat_Melanoma_clean %>% select(Ki67,location_self)%>% drop_na() %>% mutate_all(as.numeric) %>% as.data.frame() ,
probs = c(0.025, 0.975),
type = c( "bootstrap"),
boot_type = c("bca"),
R = 500L,
)
cramersv(Dat_Melanoma_clean %>% select(Ki67,location_report)%>% drop_na() %>% mutate_all(as.numeric) %>% as.data.frame())
Dat_Melanoma_clean %>% select(Ki67,location_report)%>% drop_na() %>% mutate_all(as.numeric) %>% as.data.frame()
cramer<-c(cramersv(Dat_Melanoma_clean %>% select(Ki67,location_self) %>% drop_na() %>% mutate_all(as.numeric) %>% as.data.frame()),
cramersv(Dat_Melanoma_clean %>% select(Ki67,location_report)%>% drop_na() %>% mutate_all(as.numeric) %>% as.data.frame()),
cramersv(Dat_Melanoma_clean %>% select(Ki67,sex)%>% drop_na() %>% mutate_all(as.numeric) %>% as.data.frame()),
cramersv(Dat_Melanoma_clean %>% select(Ki67,intact)%>% drop_na() %>% mutate_all(as.numeric) %>% as.data.frame()),
cramersv(Dat_Melanoma_clean %>% select(Ki67,nuclear_atypia)%>% drop_na() %>% mutate_all(as.numeric) %>% as.data.frame()),
cramersv(Dat_Melanoma_clean %>% select(Ki67,mitotoc)%>% drop_na() %>% mutate_all(as.numeric) %>% as.data.frame()),
cramersv(Dat_Melanoma_clean %>% select(Ki67,pigment)%>% drop_na() %>% mutate_all(as.numeric) %>% as.data.frame()),
cramersv(Dat_Melanoma_clean %>% select(Ki67,ulceration)%>% drop_na() %>% mutate_all(as.numeric) %>% as.data.frame()),
cramersv(Dat_Melanoma_clean %>% select(Ki67,beyond_dermis)%>% drop_na() %>% mutate_all(as.numeric) %>% as.data.frame()),
cramersv(Dat_Melanoma_clean %>% select(Ki67,size)%>% drop_na() %>% mutate_all(as.numeric) %>% as.data.frame()))
data.frame(marker=names(Dat_Melanoma_clean)[3:12],cramerV=cramer %>% round(3))
ci_cramer_location_self
ci_cramer_location_report
ci_cramer_location_report<-ci_cramersv(
Dat_Melanoma_clean %>% select(Ki67,location_report)%>% drop_na() %>% mutate_all(as.numeric) %>% as.data.frame() ,
probs = c(0.025, 0.975),
type = c( "bootstrap"),
boot_type = c("bca"),
R = 500L,
)
ci_cramer_sex<-ci_cramersv(
Dat_Melanoma_clean %>% select(Ki67,sex)%>% drop_na() %>% mutate_all(as.numeric) %>% as.data.frame() ,
probs = c(0.025, 0.975),
type = c( "bootstrap"),
boot_type = c("bca"),
R = 500L,
)
ci_cramer_intact<-ci_cramersv(
Dat_Melanoma_clean %>% select(Ki67,intact)%>% drop_na() %>% mutate_all(as.numeric) %>% as.data.frame() ,
probs = c(0.025, 0.975),
type = c( "bootstrap"),
boot_type = c("bca"),
R = 500L,
)
ci_cramer_nuclear_atypia<-ci_cramersv(
Dat_Melanoma_clean %>% select(Ki67,nuclear_atypia)%>% drop_na() %>% mutate_all(as.numeric) %>% as.data.frame() ,
probs = c(0.025, 0.975),
type = c( "bootstrap"),
boot_type = c("bca"),
R = 500L,
)
ci_cramer_mitotoc<-ci_cramersv(
Dat_Melanoma_clean %>% select(Ki67,mitotoc)%>% drop_na() %>% mutate_all(as.numeric) %>% as.data.frame() ,
probs = c(0.025, 0.975),
type = c( "bootstrap"),
boot_type = c("bca"),
R = 500L,
)
ci_cramer_pigment<-ci_cramersv(
Dat_Melanoma_clean %>% select(Ki67,pigment)%>% drop_na() %>% mutate_all(as.numeric) %>% as.data.frame() ,
probs = c(0.025, 0.975),
type = c( "bootstrap"),
boot_type = c("bca"),
R = 500L,
)
ci_cramer_ulceration<-ci_cramersv(
Dat_Melanoma_clean %>% select(Ki67,ulceration)%>% drop_na() %>% mutate_all(as.numeric) %>% as.data.frame() ,
probs = c(0.025, 0.975),
type = c( "bootstrap"),
boot_type = c("bca"),
R = 500L,
)
ci_cramer_beyond_dermis<-ci_cramersv(
Dat_Melanoma_clean %>% select(Ki67,beyond_dermis)%>% drop_na() %>% mutate_all(as.numeric) %>% as.data.frame() ,
probs = c(0.025, 0.975),
type = c( "bootstrap"),
boot_type = c("bca"),
R = 500L,
)
ci_cramer_size<-ci_cramersv(
Dat_Melanoma_clean %>% select(Ki67,size)%>% drop_na() %>% mutate_all(as.numeric) %>% as.data.frame() ,
probs = c(0.025, 0.975),
type = c( "bootstrap"),
boot_type = c("bca"),
R = 500L,
)
data.frame(marker=names(Dat_Melanoma_clean)[3:12],cramerV=cramer %>% round(3))
ci_cramer_location_report
ci_cramer_sex
cramerV<-c(ci_cramer_location_self$estimate,ci_cramer_location_report$estimate,ci_cramer_sex$estimate,ci_cramer_intact$estimate,ci_cramer_nuclear_atypia$estimate,ci_cramer_mitotoc$estimate,ci_cramer_pigment$estimate,ci_cramer_ulceration$estimate,ci_cramer_beyond_dermis$estimate,ci_cramer_size$estimate)
cramerV
cramerVlower<-c(ci_cramer_location_self$interval %>% pluck(1),ci_cramer_location_report$interval %>% pluck(1),ci_cramer_sex$interval %>% pluck(1),ci_cramer_intact$interval %>% pluck(1),ci_cramer_nuclear_atypia$interval %>% pluck(1),ci_cramer_mitotoc$interval %>% pluck(1),ci_cramer_pigment$interval %>% pluck(1),ci_cramer_ulceration$interval %>% pluck(1),ci_cramer_beyond_dermis$interval %>% pluck(1),ci_cramer_size$interval %>% pluck(1))
cramerVupper<-c(ci_cramer_location_self$interval %>% pluck(2),ci_cramer_location_report$interval %>% pluck(2),ci_cramer_sex$interval %>% pluck(2),ci_cramer_intact$interval %>% pluck(2),ci_cramer_nuclear_atypia$interval %>% pluck(2),ci_cramer_mitotoc$interval %>% pluck(2),ci_cramer_pigment$interval %>% pluck(2),ci_cramer_ulceration$interval %>% pluck(2),ci_cramer_beyond_dermis$interval %>% pluck(2),ci_cramer_size$interval %>% pluck(2))
data.frame(marker=names(Dat_Melanoma_clean)[3:12],cramerV=cramerV %>% round(3),lower=cramerVlower,upper=cramerVlower)
cramerVlower<-c(ci_cramer_location_self$interval %>% pluck(1),ci_cramer_location_report$interval %>% pluck(1),ci_cramer_sex$interval %>% pluck(1),ci_cramer_intact$interval %>% pluck(1),ci_cramer_nuclear_atypia$interval %>% pluck(1),ci_cramer_mitotoc$interval %>% pluck(1),ci_cramer_pigment$interval %>% pluck(1),ci_cramer_ulceration$interval %>% pluck(1),ci_cramer_beyond_dermis$interval %>% pluck(1),ci_cramer_size$interval %>% pluck(1))
cramerVupper<-c(ci_cramer_location_self$interval %>% pluck(2),ci_cramer_location_report$interval %>% pluck(2),ci_cramer_sex$interval %>% pluck(2),ci_cramer_intact$interval %>% pluck(2),ci_cramer_nuclear_atypia$interval %>% pluck(2),ci_cramer_mitotoc$interval %>% pluck(2),ci_cramer_pigment$interval %>% pluck(2),ci_cramer_ulceration$interval %>% pluck(2),ci_cramer_beyond_dermis$interval %>% pluck(2),ci_cramer_size$interval %>% pluck(2))
data.frame(marker=names(Dat_Melanoma_clean)[3:12],cramerV=cramerV %>% round(3),lower=cramerVlower,upper=cramerVlower)
ci_cramer_location_self$interval %>% pluck(1)
ci_cramer_location_self$interval %>% pluck(2)
data.frame(marker=names(Dat_Melanoma_clean)[3:12],cramerV=cramerV %>% round(3),lower=cramerVlower,upper=cramerVupper)
data.frame(marker=names(Dat_Melanoma_clean)[3:12],cramerV=cramerV %>% round(3),lower=cramerVlower,upper=cramerVupper) %>% gt()
data.frame(marker=names(Dat_Melanoma_clean)[3:12],cramerV=cramerV %>% round(3),lower=cramerVlower,upper=cramerVupper) %>%
gt() %>%
tab_spanner(
label = "95% bootstrap confidence interval(Rep=500)",
columns = c(cramerVlower,cramerVupper)
)
data.frame(marker=names(Dat_Melanoma_clean)[3:12],cramerV=cramerV %>% round(3),lower=cramerVlower,upper=cramerVupper) %>%
gt()
data.frame(marker=names(Dat_Melanoma_clean)[3:12],cramerV=cramerV %>% round(3),lower=cramerVlower%>% round(3),upper=cramerVupper%>% round(3)) %>%
gt()
data.frame(marker=names(Dat_Melanoma_clean)[3:12],cramerV=cramerV %>% round(3),lower=cramerVlower%>% round(3),upper=cramerVupper%>% round(3)) %>%
gt() %>%
tab_spanner(
label = "95% bootstrap confidence interval(Rep=500)",
columns = c(lower,upper)
)
#|label: IDA-describe
d_Melanoma <- describe(Dat_Melanoma_clean)
Hmisc::html(d_Melanoma, size=80, scroll=TRUE)
#|label: IDA-describe
d_Melanoma <- describe(Dat_Melanoma_clean)
Hmisc::html(d_Melanoma, size=80, scroll=TRUE)
html(d_Melanoma, size=80, scroll=TRUE)
Hmisc::html(d_Melanoma, size=80, scroll=TRUE)
Hmisc::html(d_Melanoma, size=90, scroll=TRUE)
#|label: IDA-describe
d_Melanoma <- describe(Dat_Melanoma_clean)
Hmisc::html(d_Melanoma, size=90, scroll=TRUE)
d_Melanoma
d_Melanoma <- describe(Dat_Melanoma_clean)
d_Melanoma
d_Melanoma <- Hmisc::describe(Dat_Melanoma_clean)
Hmisc::html(d_Melanoma, size=90, scroll=TRUE)
polychoric$rho %>% round(2) %>% as.matrix
tetrachoric$rho %>% round(2) %>% as.matrix
#| label: cor-tetra
#| warning: false
#| output-location: column-fragment
tetrachoric<-tetrachoric(Dat_Melanoma_clean %>% select(-case_number,-location_self,-location_report,-tumor_thickness,-mitotic_count) %>% mutate(sex=ifelse(sex=="F",1,0),intact=ifelse(intact=="I",1,0)) %>%  mutate_all(as.character) %>% mutate_all(as.numeric))
tetrachoric$rho %>% round(2) %>% as.matrix
tetrachoric$rho %>% round(2) %>% as.tibble()
tetrachoric$rho %>% round(2) %>% as_tibble.data.frame
tetrachoric$rho %>% round(2) %>% as_tibble.data.frame()
tetrachoric$rho %>% round(2) %>% as.data.frame() %>%
as_tibble() %>%
rownames_to_column("rname")
tetrachoric$rho %>% round(2) %>% as.matrix() %>%
rownames_to_column("rname")
tetrachoric$rho %>% round(2) %>% as.matrix()
Ttret<-tetrachoric$rho %>% round(2) %>% as.matrix()
rownames(Ttret)
data.frame(variable=rownames(Ttret),c(Ttret))
tetrachoric$rho %>% round(2) %>% as_tibble.matrix
data.frame(variable=rownames(Ttret),Ttret)
data.frame(Ttret)
tetrachoric$rho %>% round(2) %>% data.frame()
tetrachoric$rho %>% round(2) %>% data.frame()
tetrachoric$rho %>% round(2) %>% data.frame() %>%
gt()
tetrachoric$rho %>% round(2) %>% data.frame() %>%
rownames_to_column("rname") %>%
gt()
tetrachoric$rho %>% round(2) %>% data.frame() %>%
rownames_to_column("variable") %>%
gt()
tetrachoric$rho %>% round(2) %>% data.frame() %>%
rownames_to_column("") %>%
gt()
tetrachoric$rho %>% round(2) %>% data.frame() %>%
rownames_to_column(" ") %>%
gt()
#| label: cor-polychor
#| warning: false
polychoric<-polychoric(Dat_Melanoma_clean %>% select(Ki67,location_self,location_report) %>% mutate_all(as.character) %>% mutate_all(as.numeric))
polychoric$rho %>% round(2) %>% data.frame() %>%
rownames_to_column(" ") %>%
gt()
